"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{1465:(e,t,a)=>{a.d(t,{l:()=>s});var r=a(59921);let s=async()=>{try{let e=await r.A.get("/api/priority/",{headers:{"Content-Type":"application/json"}});return{success:!0,data:e.data}}catch(r){var e,t,a,s;return{success:!1,message:(null==(t=r.response)||null==(e=t.data)?void 0:e.detail)||(null==(s=r.response)||null==(a=s.data)?void 0:a.message)||"Error fetching priorities."}}}},4516:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9803:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},14186:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},18745:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(95155);a(12115);var s=a(66474);let l=(0,a(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),n=e=>{var t;let{label:a,selectedItems:n,options:o,onToggleItem:i,onSelectAll:d,onClearAll:c,dropdownKey:u,openDropdown:m,setOpenDropdown:h,idKey:x="id",displayKey:g="name",isLoading:p=!1,className:y=""}=e;return(0,r.jsxs)("div",{className:"relative dropdown-container ".concat(y),children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),h(m===u?null:u)},className:"flex items-center justify-between space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 min-w-[140px] transition-colors",disabled:p,children:[(0,r.jsx)("span",{className:"truncate",children:p?"Loading...":(null==n?void 0:n.length)===0?a:(null==n?void 0:n.length)===1?(null==(t=o.find(e=>e[x]===n[0]))?void 0:t[g])||"":"".concat(null==n?void 0:n.length," selected")}),(0,r.jsx)(s.A,{size:16,className:"transition-transform duration-200 ".concat(m===u?"rotate-180":"")})]}),m===u&&!p&&(0,r.jsxs)("div",{className:"absolute z-30 mt-1 w-64 bg-white border border-gray-300 rounded-md shadow-lg max-h-80 overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-2 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Select All"}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"text-xs text-gray-600 hover:text-gray-800 font-medium",children:"Clear All"})]})}),o.map(e=>(0,r.jsxs)("div",{onClick:t=>{t.stopPropagation(),i(e[x])},className:"flex items-center px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer transition-colors ".concat(n.includes(e[x])?"bg-blue-50":""),children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-4 h-4 mr-3",children:n.includes(e[x])&&(0,r.jsx)(l,{size:14,className:"text-blue-600"})}),(0,r.jsx)("span",{className:"flex-1 ".concat(n.includes(e[x])?"text-blue-700 font-medium":"text-gray-700"),children:e[g]})]},e[x])),0===o.length&&(0,r.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No options available"})]})]})}},27213:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},32919:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},43862:(e,t,a)=>{a.d(t,{A:()=>E});var r=a(95155),s=a(18745),l=a(1465),n=a(63540),o=a(53422),i=a(6874),d=a.n(i),c=a(12115),u=a(27213),m=a(9803),h=a(19946);let x=(0,h.A)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);var g=a(99890),p=a(57434),y=a(69074),v=a(66474),f=a(85339),b=a(54416),j=a(47924);let w=(0,h.A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),N=(0,h.A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var k=a(32919),A=a(4516),S=a(14186);let C=e=>{let{totalRecords:t,limit:a,offset:s,onPageChange:l,className:n=""}=e,o=Math.floor(s/a)+1,i=Math.ceil(t/a);if(i<=1)return null;let d=(()=>{let e=[],t=[];if(i<=7){for(let e=1;e<=i;e++)t.push(e);return t}let a=Math.max(2,o-2),r=Math.min(i-1,o+2);for(let t=a;t<=r;t++)e.push(t);a>2?(t.push(1),a>3&&t.push("...")):t.push(1),t.push(...e),r<i-1?(r<i-2&&t.push("..."),t.push(i)):r===i-1&&t.push(i);let s=[],l=new Set;for(let e of t)l.has(e)||(s.push(e),l.add(e));return s})();return(0,r.jsx)("div",{className:"border border-red-500  rounded-xl shadow-lg",children:(0,r.jsxs)("div",{className:"inline-flex items-center bg-white rounded-full shadow-sm px-1 py-1 ".concat(n),children:[(0,r.jsx)("button",{onClick:()=>{console.log("Previous clicked, current page:",o),o>1&&(console.log("Calling onPageChange with:",o-1),l(o-1))},disabled:1===o,className:"px-2 py-1 text-xs font-medium rounded-full transition-colors duration-200 ".concat(1===o?"text-gray-400 cursor-not-allowed":"text-red-500 hover:bg-red-50"),children:"Prev"}),d.map((e,t)=>(0,r.jsx)(c.Fragment,{children:"..."===e?(0,r.jsx)("span",{className:"px-2 py-1 text-xs text-gray-400",children:"..."}):(0,r.jsx)("button",{onClick:()=>(e=>{"number"==typeof e&&e!==o&&l(e)})(e),className:"min-w-[28px] h-6 text-xs font-medium rounded-full transition-all duration-200 ".concat(e===o?"bg-red-500 text-white shadow-sm":"text-red-500 hover:bg-red-50"),children:e})},"page-".concat(t,"-").concat(e))),(0,r.jsx)("button",{onClick:()=>{console.log("Next clicked, current page:",o,"total pages:",i),o<i&&(console.log("Calling onPageChange with:",o+1),l(o+1))},disabled:o===i,className:"px-2 py-1 text-xs font-medium rounded-full transition-colors duration-200 ".concat(o===i?"text-gray-400 cursor-not-allowed":"text-red-500 hover:bg-red-50"),children:"Next"})]})})};var _=a(87909),z=a(35695),M=a(84105);let E=e=>{let{status:t,countKey:a,title:i}=e,{user:h}=(0,M.A)();(0,z.useRouter)(),console.log("============sujit============="),console.log(h),console.log("============sujit=============");let{updateCount:E}=(0,o.tL)(),[I,L]=(0,c.useState)(""),[T,D]=(0,c.useState)(""),[P,R]=(0,c.useState)(""),[W,B]=(0,c.useState)(""),[H,F]=(0,c.useState)([]),[O,q]=(0,c.useState)([]),[K,V]=(0,c.useState)("grid"),[U,G]=(0,c.useState)(null),[Y,Z]=(0,c.useState)([]),[J,Q]=(0,c.useState)(!0),[X,$]=(0,c.useState)(1),[ee,et]=(0,c.useState)(0),[ea]=(0,c.useState)(12),[er,es]=(0,c.useState)(null),[el,en]=(0,c.useState)([]),[eo,ei]=(0,c.useState)([]),[ed,ec]=(0,c.useState)(!0),[eu,em]=(0,c.useState)(!0),eh=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{Q(!0),es(null);let r=await (0,_.m)({page:e,limit:ea,appliedSearchTerm:T,dateFrom:P,dateTo:W,selectedLocations:H,selectedPriorities:O,status:t});Z(r.results),et(r.total_records),$(e),1===e&&(E(a,r.total_records),console.log("Updated ".concat(a," count to:"),r.total_records))}catch(e){es(e instanceof Error?e.message:"An error occurred"),Z([]),et(0)}finally{Q(!1)}},ex=()=>!!(I.trim()||P||W||H.length>0||O.length>0),eg=async()=>{try{ec(!0);let e=await (0,n.V)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.location&&"string"==typeof e.location).map(e=>({id:e.location.trim(),name:e.location.trim()}));en(t)}else console.error("Invalid locations response structure:",e)}catch(e){console.error("Error fetching locations:",e)}finally{ec(!1)}},ep=async()=>{try{em(!0);let e=await (0,l.l)();e.success&&e.data&&Array.isArray(e.data)&&ei(e.data)}catch(e){console.error("Error fetching priorities:",e)}finally{em(!1)}};(0,c.useEffect)(()=>{eh(1)},[t]),(0,c.useEffect)(()=>{eg(),ep()},[]),(0,c.useEffect)(()=>{let e=e=>{e.target&&(e.target.closest(".dropdown-container")||G(null))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let ey=()=>{let e=I.trim();D(e),(0,_.m)({page:1,limit:ea,appliedSearchTerm:e,dateFrom:P,dateTo:W,selectedLocations:H,selectedPriorities:O,status:t}).then(e=>{Z(e.results),et(e.total_records),$(1),E(a,e.total_records)})},ev=async()=>{L(""),D(""),R(""),B(""),F([]),q([]);try{Q(!0),es(null);let e=await (0,_.m)({page:1,limit:ea,appliedSearchTerm:"",dateFrom:"",dateTo:"",selectedLocations:[],selectedPriorities:[],status:t});Z(e.results),et(e.total_records),$(1),E(a,e.total_records)}catch(e){es(e instanceof Error?e.message:"An error occurred"),Z([]),et(0)}finally{Q(!1)}},ef=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||0===e.length)return null;let t=[...new Set(e.map(e=>{var t;let a=(null==(t=e.mime)?void 0:t.toLowerCase())||"";return a.startsWith("image/")?"image":a.startsWith("video/")?"video":a.startsWith("audio/")?"audio":"application/pdf"===a?"pdf":"document"}))];return(0,r.jsxs)("div",{className:"flex items-center",style:{gap:"-6px"},children:[t.slice(0,4).map((e,a)=>(0,r.jsx)("div",{style:{marginLeft:a>0?"-6px":"0",zIndex:t.length-a},children:(e=>{let t="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs";switch(e){case"image":return(0,r.jsx)("div",{className:"".concat(t," bg-green-500"),children:(0,r.jsx)(u.A,{size:10})});case"video":return(0,r.jsx)("div",{className:"".concat(t," bg-blue-500"),children:(0,r.jsx)(m.A,{size:10})});case"audio":return(0,r.jsx)("div",{className:"".concat(t," bg-purple-500"),children:(0,r.jsx)(x,{size:10})});case"pdf":return(0,r.jsx)("div",{className:"".concat(t," bg-red-500"),children:(0,r.jsx)(g.A,{size:10})});default:return(0,r.jsx)("div",{className:"".concat(t," bg-orange-500"),children:(0,r.jsx)(p.A,{size:10})})}})(e)},a)),t.length>4&&(0,r.jsxs)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-gray-500 text-white text-xs font-medium",style:{marginLeft:"-6px",zIndex:0},children:["+",t.length-4]})]})};return J||ed||eu?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-6"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,r.jsx)("div",{className:"flex space-x-4 mb-6",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"},e))}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(e=>(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"},e))})]})]})})}):er?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(f.A,{size:64,className:"mx-auto text-red-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Error loading data"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:er}),(0,r.jsx)("button",{onClick:()=>eh(X),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"sticky top-0 z-20 bg-gray-50 shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-baseline lg:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"relative dropdown-container",children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),G("dateRange"===U?null:"dateRange")},className:"flex items-center justify-between space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 min-w-[140px] transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.A,{size:16}),(0,r.jsx)("span",{className:"truncate",children:"Date"})]}),(0,r.jsx)(v.A,{size:16,className:"transition-transform duration-200 ".concat("dateRange"===U?"rotate-180":"")})]}),"dateRange"===U&&(0,r.jsx)("div",{className:"absolute z-30 mt-1 w-72 bg-white border border-gray-300 rounded-md shadow-lg p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,r.jsx)("input",{type:"date",value:P,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,r.jsx)("input",{type:"date",value:W,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,r.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,r.jsx)("button",{onClick:()=>{R(""),B(""),G(null)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Clear"}),(0,r.jsx)("button",{onClick:()=>{G(null),(P||W)&&eh(1)},disabled:!P&&!W,className:"flex-1 px-3 py-2 text-sm rounded-md transition-colors ".concat(P||W?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Apply"})]})]})})]}),{}),(0,r.jsx)(s.A,{label:"Location",selectedItems:H,options:el,onToggleItem:e=>{F(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onSelectAll:()=>{F(el.map(e=>e.id))},onClearAll:()=>{F([])},dropdownKey:"location",openDropdown:U,setOpenDropdown:G,idKey:"id",displayKey:"name",isLoading:ed}),(0,r.jsx)(s.A,{label:"Priority",selectedItems:O,options:eo,onToggleItem:e=>{q(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onSelectAll:()=>{q(eo.map(e=>e.id))},onClearAll:()=>{q([])},dropdownKey:"priority",openDropdown:U,setOpenDropdown:G,idKey:"id",displayKey:"priority",isLoading:eu}),(I.trim()||T||P||W||H.length>0||O.length>0)&&(0,r.jsx)("button",{onClick:ev,className:"px-3 py-2 text-sm text-red-600 hover:text-red-800 border border-red-300 rounded-2xl hover:bg-red-50 transition-colors bg-red-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{size:16}),(0,r.jsx)("span",{children:"Clear Filters"})]})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,r.jsx)("input",{type:"text",value:I,onChange:e=>L(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ey())},placeholder:"Search stories...",className:"pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm w-64 bg-white"})]}),(0,r.jsx)("button",{onClick:ey,disabled:!ex(),className:"px-4 py-2.5 rounded-lg transition-colors text-sm font-medium ".concat(ex()?"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Apply"})]}),(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg overflow-hidden p-1",children:[(0,r.jsx)("button",{onClick:()=>V("grid"),className:"p-2 rounded-md transition-all ".concat("grid"===K?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:(0,r.jsx)(w,{size:18})}),(0,r.jsx)("button",{onClick:()=>V("list"),className:"p-2 rounded-md transition-all ".concat("list"===K?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:(0,r.jsx)(N,{size:18})})]})]})})]})})})}),(0,r.jsxs)("div",{className:"relative max-w-7xl mx-auto py-6",children:[(0,r.jsx)("div",{className:"grid gap-4 ".concat("grid"===K?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:Y.map(e=>{let t=(e=>{let t=new Date(e),a=new Date().getTime()-t.getTime(),r=Math.floor(a/864e5),s=Math.floor(a%864e5/36e5),l=Math.floor(a%36e5/6e4);return r>0?"".concat(r," d, ").concat(s," hr"):s>0?"".concat(s," hr, ").concat(l," min"):"".concat(l," min")})(e.created_date),a=(0,r.jsxs)(r.Fragment,{children:[e.status_text&&""!==e.status_text.trim()?(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"absolute top-0 right-0 bg-teal-600 text-white font-medium",style:{fontSize:"0.5rem",lineHeight:"0.6rem",paddingTop:"0.2rem",paddingBottom:"0.2rem",paddingLeft:"0.2rem",paddingRight:"0.2rem",borderRadius:"0px 6px"},children:e.status_text})}):null,e.locked&&h.user_id!=e.lock.locked_by?(0,r.jsxs)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-30 flex flex-col items-center justify-center z-10",children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-full shadow-lg mb-10",children:(0,r.jsx)(k.A,{size:32,className:"text-gray-600"})}),(0,r.jsxs)("div",{style:{backgroundColor:"#a4170c",color:"#fff",paddingTop:"0.35rem",paddingBottom:"0.35rem",paddingLeft:".45rem",paddingRight:".45rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%"},children:[(0,r.jsx)(k.A,{size:10}),(0,r.jsxs)("span",{style:{fontSize:"0.575rem",lineHeight:"0.76",fontWeight:500},children:["Locked by ",e.lock.locked_by_name]})]})]}):null,(0,r.jsxs)("div",{className:"p-4 pt-4 ".concat(e.locked&&h.user_id!=e.lock.locked_by?"opacity-70":""),children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(y.A,{size:14})}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.created_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})})]}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-base leading-tight",style:{minHeight:"80px",borderBottom:"1px solid #aba7a759",marginBottom:"1px",paddingBottom:"20px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,overflow:"hidden",textOverflow:"ellipsis",wordWrap:"break-word",lineHeight:"1.4"},children:e.headline}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,r.jsx)(A.A,{size:14}),(0,r.jsx)("span",{className:"text-sm",children:e.location})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"priority"}),(0,r.jsx)("div",{className:"text-sm font-semibold ".concat((e=>{switch(e){case"High":return"text-orange-600";case"Medium":return"text-yellow-600";case"Breaking":return"text-red-600";case"Low":return"text-green-600";default:return"text-gray-600"}})(e.priority_text)),children:e.priority_text})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["By ",(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.created_name})]})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[ef(e.attachments),(0,r.jsxs)("div",{style:{backgroundColor:"#a4170c",color:"#fff",borderRadius:"1.375rem",paddingTop:"0.15rem",paddingBottom:"0.15rem",paddingLeft:".25rem",paddingRight:".25rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"fit-content",marginLeft:"auto"},children:[(0,r.jsx)(S.A,{size:12}),(0,r.jsxs)("span",{style:{fontSize:"0.575rem",lineHeight:"0.76",fontWeight:500},children:["Waiting ",t]})]})]})]})]});return(0,r.jsx)("div",{children:e.locked&&h.user_id!=e.lock.locked_by?(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-sm transition-all duration-200 overflow-hidden relative",children:a}):(0,r.jsx)(d(),{href:"/details/".concat(e.id),children:(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-sm transition-all duration-200 cursor-pointer overflow-hidden relative",children:a})})},e.id)})}),0===Y.length&&!J&&(0,r.jsxs)("div",{className:"text-center py-20",children:[(0,r.jsx)("div",{className:"text-gray-300 mb-6",children:(0,r.jsx)(f.A,{size:64,className:"mx-auto"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No stories found"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters or search terms"})]}),ee>0&&(0,r.jsx)("div",{className:"fixed bottom-5 right-16 transform z-50 max-w-7xl w-full flex justify-end pointer-events-none",children:(0,r.jsx)("div",{className:"pointer-events-auto",children:(0,r.jsx)(C,{offset:(X-1)*ea,totalRecords:ee,limit:ea,onPageChange:e=>{eh(e)}})})})]})]})}},47924:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},53422:(e,t,a)=>{a.d(t,{fn:()=>d,tL:()=>c});var r=a(95155),s=a(12115),l=a(59921);let n=async()=>{var e,t,a,r,s,n,o,i,d,c,u,m,h,x,g,p,y,v,f;let b=localStorage.getItem("token");try{let x=(await l.A.get("/api/content/count",{headers:{"Content-Type":"application/json",...b&&{Authorization:"Bearer ".concat(b)}}})).data;return x.success&&x.data&&(x=x.data),{draft:Number(null==(e=x["1"])?void 0:e.count)||0,waitList:Number(null==(t=x["2"])?void 0:t.count)||0,waitingInOutput:Number(null==(a=x["3"])?void 0:a.count)||0,rejected:Number(null==(r=x["4"])?void 0:r.count)||0,published:Number(null==(s=x["5"])?void 0:s.count)||0,deleted:Number(null==(n=x["6"])?void 0:n.count)||0,inputToStringer:Number(null==(o=x["7"])?void 0:o.count)||0,outputToInput:Number(null==(i=x["8"])?void 0:i.count)||0,inputWip:Number(null==(d=x["9"])?void 0:d.count)||0,outputWip:Number(null==(c=x["10"])?void 0:c.count)||0,outputToStringer:Number(null==(u=x["11"])?void 0:u.count)||0,stringerToOutput:Number(null==(m=x["12"])?void 0:m.count)||0,shared:Number(null==(h=x["13"])?void 0:h.count)||0}}catch(e){throw Error((null==(g=e.response)||null==(x=g.data)?void 0:x.message)||(null==(y=e.response)||null==(p=y.data)?void 0:p.detail)||(null==(f=e.response)||null==(v=f.data)?void 0:v.error)||e.message||"Failed to fetch counts")}},o={draft:0,waitList:0,waitingInOutput:0,rejected:0,published:0,deleted:0,inputToStringer:0,outputToInput:0,inputWip:0,outputWip:0,outputToStringer:0,stringerToOutput:0,shared:0},i=(0,s.createContext)(void 0),d=e=>{let{children:t}=e,[a,l]=(0,s.useState)(o),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),h=(0,s.useRef)(!0),x=(0,s.useCallback)(async()=>{if(h.current)try{c(!0),m(null);let e=await n();h.current&&l(e)}catch(e){h.current&&m(e instanceof Error?e.message:"Failed to fetch counts")}finally{h.current&&c(!1)}},[]),g=(0,s.useCallback)((e,t)=>{l(a=>({...a,[e]:t}))},[]);return(0,s.useEffect)(()=>(h.current=!0,x(),()=>{h.current=!1}),[x]),(0,s.useEffect)(()=>{let e=()=>{h.current&&!document.hidden&&x()},t=()=>{!document.hidden&&h.current&&x()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",t)}},[x]),(0,r.jsx)(i.Provider,{value:{counts:a,isLoading:d,error:u,refreshCounts:x,updateCount:g},children:t})},c=()=>{let e=(0,s.useContext)(i);return void 0===e?{counts:o,isLoading:!1,error:null,refreshCounts:async()=>{},updateCount:()=>{}}:e}},54416:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},57434:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},59576:(e,t,a)=>{a.d(t,{A:()=>d,AuthProvider:()=>i});var r=a(95155),s=a(12115),l=a(35695),n=a(29159);let o=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),u=(0,l.useRouter)();return(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("tokenExpiration");if(e&&t)if(new Date().getTime()<parseInt(t))try{let t=(0,n.s)(e);i({user_id:(null==t?void 0:t.user_id)||"0",email:(null==t?void 0:t.email)||"",name:(null==t?void 0:t.name)||"",phone:(null==t?void 0:t.phone)||"",role_id:(null==t?void 0:t.role_id)||"",role_name:(null==t?void 0:t.role_name)||"",role_data:(null==t?void 0:t.role_data)||{}})}catch(e){console.error("Error decoding token:",e),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration")}else localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration");c(!1)},[]),(0,r.jsx)(o.Provider,{value:{user:a,loading:d,isAuthenticated:!!a,login:e=>{try{let t=new Date().getTime()+288e5;localStorage.setItem("token",e),localStorage.setItem("tokenExpiration",t.toString());let a=(0,n.s)(e);i({user_id:(null==a?void 0:a.user_id)||"Guest",email:(null==a?void 0:a.email)||"",name:(null==a?void 0:a.name)||"",phone:(null==a?void 0:a.phone)||"",role_id:(null==a?void 0:a.role_id)||"",role_name:(null==a?void 0:a.role_name)||"",role_data:(null==a?void 0:a.role_data)||{}})}catch(e){console.error("Error during login:",e)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration"),i(null),u.replace("/login")}},children:t})},d=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},59921:(e,t,a)=>{a.d(t,{A:()=>s});let r=a(23464).A.create({baseURL:"https://sppyapi.odishatv.in"});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let s=r},63540:(e,t,a)=>{a.d(t,{V:()=>s,u:()=>l});var r=a(59921);let s=async()=>{try{let e=await r.A.get("/api/location/",{headers:{"Content-Type":"application/json"}});return{success:!0,data:e.data}}catch(r){var e,t,a,s;return{success:!1,message:(null==(t=r.response)||null==(e=t.data)?void 0:e.detail)||(null==(s=r.response)||null==(a=s.data)?void 0:a.message)||"Error fetching locations."}}},l=async e=>{try{let t=await r.A.post("/api/location/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,s,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(s=l.data)?void 0:s.message)||"Error fetching locations."}}}},69074:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},84105:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(59576);let s=()=>{let{user:e,loading:t,isAuthenticated:a,login:s,logout:l}=(0,r.A)();return{user:e,loading:t,isAuthenticated:a,login:s,logout:l}}},85339:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},87909:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(59921);let s=async e=>{try{let{page:t=1,limit:a=12,status:s,appliedSearchTerm:l,dateFrom:n,dateTo:o,selectedLocations:i,selectedPriorities:d,selectedCreatedBy:c,selectedContentTypes:u,fetchLatestMonth:m=!1}=e,h=["status=".concat(s)];if(m||h.push("limit=".concat(a),"offset=".concat((t-1)*a)),!m||n||o)n&&h.push("from_date=".concat(n)),o&&h.push("to_date=".concat(o));else{let{from:e,to:t}=(()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);return{from:t.toISOString().split("T")[0],to:a.toISOString().split("T")[0]}})();h.push("from_date=".concat(e),"to_date=".concat(t))}l&&h.push("headline=".concat(encodeURIComponent(l))),i&&i.length>0&&h.push("location=".concat(i.join(","))),d&&d.length>0&&h.push("priority=".concat(d.join(","))),c&&c.length>0&&h.push("created_by=".concat(c.join(","))),u&&u.length>0&&h.push("content_type=".concat(u.join(",")));let x=h.join("&");return console.log("API URL:","/api/content/?".concat(x)),(await r.A.get("/api/content/?".concat(x),{headers:{"Content-Type":"application/json"}})).data}catch(r){var t,a,s,l;let e=(null==(a=r.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=r.response)||null==(s=l.data)?void 0:s.message)||r.message||"Failed to fetch data";throw console.error("Error fetching activities:",r),Error(e)}}},99890:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(19946).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])}}]);