(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{19946:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var s=t(12115);let r=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:a,...n,width:r,height:r,stroke:t,strokeWidth:o?24*Number(i)/Number(r):i,className:l("lucide",d),...!c&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(c)?c:[c]])}),o=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:o,...d}=t;return(0,s.createElement)(i,{ref:n,iconNode:a,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return t.displayName=r(e),t}},27840:(e,a,t)=>{Promise.resolve().then(t.bind(t,76933))},43453:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},44940:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},51154:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53904:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},59576:(e,a,t)=>{"use strict";t.d(a,{A:()=>d,AuthProvider:()=>o});var s=t(95155),r=t(12115),l=t(35695),n=t(29159);let i=(0,r.createContext)(void 0),o=e=>{let{children:a}=e,[t,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),u=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("tokenExpiration");if(e&&a)if(new Date().getTime()<parseInt(a))try{let a=(0,n.s)(e);o({user_id:(null==a?void 0:a.user_id)||"0",email:(null==a?void 0:a.email)||"",name:(null==a?void 0:a.name)||"",phone:(null==a?void 0:a.phone)||"",role_id:(null==a?void 0:a.role_id)||"",role_name:(null==a?void 0:a.role_name)||"",role_data:(null==a?void 0:a.role_data)||{}})}catch(e){console.error("Error decoding token:",e),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration")}else localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration");c(!1)},[]),(0,s.jsx)(i.Provider,{value:{user:t,loading:d,isAuthenticated:!!t,login:e=>{try{let a=new Date().getTime()+288e5;localStorage.setItem("token",e),localStorage.setItem("tokenExpiration",a.toString());let t=(0,n.s)(e);o({user_id:(null==t?void 0:t.user_id)||"Guest",email:(null==t?void 0:t.email)||"",name:(null==t?void 0:t.name)||"",phone:(null==t?void 0:t.phone)||"",role_id:(null==t?void 0:t.role_id)||"",role_name:(null==t?void 0:t.role_name)||"",role_data:(null==t?void 0:t.role_data)||{}})}catch(e){console.error("Error during login:",e)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration"),o(null),u.replace("/login")}},children:a})},d=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},59921:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let s=t(23464).A.create({baseURL:"https://sppyapi.odishatv.in"});s.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let r=s},62278:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(95155),r=t(12115),l=t(35695),n=t(59576);let i=e=>{let a=a=>{let t=(0,l.useRouter)(),{isAuthenticated:i,loading:o}=(0,n.A)();return((0,r.useEffect)(()=>{o||i||(t.replace("/login"),setTimeout(()=>{"/login"!==window.location.pathname&&(window.location.href="/login")},100))},[i,o,t]),o||!i)?null:(0,s.jsx)(e,{...a})};return a.displayName="withAuth(".concat(e.displayName||e.name,")"),a}},69733:(e,a,t)=>{"use strict";t.d(a,{O0:()=>r,iz:()=>n,mO:()=>i,vZ:()=>l});var s=t(59921);let r=async()=>{try{let e=await s.A.get("/api/role/",{headers:{"Content-Type":"application/json"}});return{success:!0,data:e.data}}catch(s){var e,a,t,r;return{success:!1,message:(null==(a=s.response)||null==(e=a.data)?void 0:e.detail)||(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||"Error fetching roles."}}},l=async e=>{try{let a=await s.A.post("/api/role/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,t,r,l;return{success:!1,message:(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error adding role."}}},n=async e=>{try{let{id:a,...t}=e,r=await s.A.put("/api/role/".concat(a),t,{headers:{"Content-Type":"application/json"}});return{success:!0,data:r.data}}catch(e){var a,t,r,l;return{success:!1,message:(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error updating role."}}},i=async e=>{try{let{id:a,...t}=e,r=await s.A.delete("/api/role/".concat(a),{data:t,headers:{"Content-Type":"application/json"}});return{success:!0,data:r.data}}catch(e){var a,t,r,l;return{success:!1,message:(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error deleting role."}}}},71007:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},76933:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var s=t(95155),r=t(12115),l=t(71007),n=t(53904),i=t(51154),o=t(44940),d=t(84616),c=t(85339),u=t(43453),m=t(19946);let p=(0,m.A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),h=(0,m.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var g=t(84744),x=t(69733);let y=()=>{let[e,a]=(0,r.useState)([]),[t,m]=(0,r.useState)([]),[y,v]=(0,r.useState)({name:"",phone:"",password:"",email:"",role_id:"",location:""}),[b,f]=(0,r.useState)(null),[w,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[A,_]=(0,r.useState)(""),[E,C]=(0,r.useState)(""),[S,F]=(0,r.useState)(null);(0,r.useEffect)(()=>{I(),T()},[]);let I=async()=>{k(!0);try{let e=await (0,g.wz)();if(e.success&&e.data){let t=e.data.map(e=>({id:e.id.toString(),name:e.name.trim(),phone:e.phone||"",email:e.email||"",role_id:e.role_id.toString(),location:e.location||"",is_active:void 0===e.is_active||e.is_active})).sort((e,a)=>parseInt(a.id)-parseInt(e.id));a(t)}}catch(e){console.log("Failed to load users")}finally{k(!1)}},T=async()=>{try{let e=await (0,x.O0)();e.success&&e.data&&m(e.data)}catch(e){console.log("Failed to load roles")}},P=()=>y.name.trim()?y.phone.trim()?y.email.trim()?b||y.password.trim()?y.role_id?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)?!!/^\d{10}$/.test(y.phone.replace(/\D/g,""))||(_("Please enter a valid 10-digit phone number."),!1):(_("Please enter a valid email address."),!1):(_("Role is required."),!1):(_("Password is required."),!1):(_("Email is required."),!1):(_("Phone is required."),!1):(_("Name is required."),!1),L=async a=>{if(a.preventDefault(),P()){if(e.some(e=>e.email&&e.email.toLowerCase()===y.email.trim().toLowerCase()))return void _("This email already exists.");if(e.some(e=>e.phone&&e.phone===y.phone.trim()))return void _("This phone number already exists.");j(!0),_(""),C("");try{let e={name:y.name.trim(),phone:y.phone.trim(),password:y.password,email:y.email.trim(),role_id:y.role_id,location:y.location.trim()||void 0};console.log("Sending user data:",e);let a=await (0,g.nu)(e);if(console.log("API Response:",a),a.success&&a.data){let t=a.data;t.id&&t.name&&(t.id.toString(),t.name.trim(),t.phone,t.email,t.role_id.toString(),t.location,void 0===t.is_active||t.is_active),v({name:"",phone:"",password:"",email:"",role_id:"",location:""}),C('User "'.concat(e.name,'" added successfully!')),await I(),setTimeout(()=>C(""),3e3)}else{let e=a.message||"Failed to add user. Please try again.";_(e),console.error("API Error:",a)}}catch(e){console.error("Error adding user:",e),_("An unexpected error occurred. Please try again.")}finally{j(!1)}}},U=async a=>{if(a.preventDefault(),b&&P()){if(e.some(e=>e.id!==b.id&&e.email&&e.email.toLowerCase()===y.email.trim().toLowerCase()))return void _("This email already exists.");if(e.some(e=>e.id!==b.id&&e.phone&&e.phone===y.phone.trim()))return void _("This phone number already exists.");j(!0),_(""),C("");try{let e={id:parseInt(b.id),name:y.name.trim(),phone:y.phone.trim(),email:y.email.trim(),role_id:y.role_id,location:y.location.trim()||void 0,...y.password&&{password:y.password}},a=await (0,g.gw)(e);if(a.success)C('User "'.concat(e.name,'" updated successfully!')),await I(),q(),setTimeout(()=>C(""),3e3);else{let e=a.message||"Failed to update user. Please try again.";_(e),console.error("API Error:",a)}}catch(e){console.error("Error editing user:",e),_("An unexpected error occurred. Please try again.")}finally{j(!1)}}},M=async t=>{let s=e.find(e=>e.id===t);if(s){j(!0),_(""),C("");try{let e={id:parseInt(t),is_active:!s.is_active};if((await (0,g.gw)(e)).success){a(e=>e.map(e=>e.id===t?{...e,is_active:!e.is_active}:e));let e=s.is_active?"deactivated":"activated";C('User "'.concat(s.name,'" ').concat(e," successfully!")),setTimeout(()=>C(""),3e3)}else setTimeout(()=>{I()},2e3)}catch(e){console.log("Error updating user status:",e)}finally{j(!1),F(null)}}},q=()=>{f(null),v({name:"",phone:"",password:"",email:"",role_id:"",location:""}),_("")},z=e=>{let{name:a,value:t}=e.target;v(e=>({...e,[a]:t})),A&&_(""),E&&C("")};return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"h-5 w-5 text-blue-500"}),"All Users (",e.length,")"]}),(0,s.jsxs)("button",{onClick:()=>{I(),q()},disabled:N,className:"flex items-center gap-1 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:opacity-50",title:"Refresh users",children:[(0,s.jsx)(n.A,{className:"h-3 w-3 ".concat(N?"animate-spin":"")}),"Refresh"]})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:N?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(i.A,{className:"h-6 w-6 mx-auto mb-2 animate-spin"}),(0,s.jsx)("p",{children:"Loading users..."})]}):e.length>0?e.map(e=>(0,s.jsx)("div",{className:"px-4 py-3 rounded-md border transition-colors ".concat(e.is_active?"bg-blue-50 border-blue-200 hover:bg-blue-100":"bg-gray-50 border-gray-200 hover:bg-gray-100 opacity-75"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5 ".concat(e.is_active?"text-blue-500":"text-gray-400"),children:(0,s.jsx)(l.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-gray-800 font-medium truncate",children:e.name}),(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-0.5",children:[(0,s.jsx)("div",{children:e.email||"No email"}),(0,s.jsx)("div",{children:e.phone||"No phone"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{children:["Role: ",(e=>{let a=t.find(a=>a.role_id.toString()===e);return(null==a?void 0:a.role_name)||"Unknown"})(e.role_id)]}),e.location&&(0,s.jsxs)("span",{children:["Location: ",e.location]})]})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:(0,s.jsx)("button",{onClick:()=>(e=>{f(e),v({name:e.name,phone:e.phone||"",password:"",email:e.email||"",role_id:e.role_id,location:e.location||""}),_(""),C("")})(e),disabled:w||null!==b,className:"text-blue-500 hover:text-blue-700 transition-colors duration-200 p-1 rounded-full hover:bg-blue-50 disabled:opacity-50",title:"Edit user",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})})]})},e.id)):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(l.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,s.jsx)("p",{children:"No users found"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Add your first user to get started"})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"h-5 w-5 text-blue-500"}),"Edit User"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-blue-500"}),"Add New User"]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[A&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-md text-red-700",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm",children:A})]}),E&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-md text-green-700",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm",children:E})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:y.name,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(A&&!y.name.trim()?"border-red-300 bg-red-50":"border-gray-300"," ").concat(w?"bg-gray-100 cursor-not-allowed":""),placeholder:"Enter full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",value:y.phone,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(A&&!y.phone.trim()?"border-red-300 bg-red-50":"border-gray-300"," ").concat(w?"bg-gray-100 cursor-not-allowed":""),placeholder:"Enter phone number"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:y.email,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(A&&!y.email.trim()?"border-red-300 bg-red-50":"border-gray-300"," ").concat(w?"bg-gray-100 cursor-not-allowed":""),placeholder:"Enter email address"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!b&&(0,s.jsx)("span",{className:"text-red-500",children:"*"}),b&&(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(leave blank to keep current)"})]}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:y.password,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(A&&!b&&!y.password.trim()?"border-red-300 bg-red-50":"border-gray-300"," ").concat(w?"bg-gray-100 cursor-not-allowed":""),placeholder:b?"Enter new password (optional)":"Enter password"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"role_id",name:"role_id",value:y.role_id,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(A&&!y.role_id?"border-red-300 bg-red-50":"border-gray-300"," ").concat(w?"bg-gray-100 cursor-not-allowed":""),children:[(0,s.jsx)("option",{value:"",children:"Select a role"}),t.map(e=>(0,s.jsx)("option",{value:e.role_id.toString(),children:e.role_name},e.role_id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsx)("input",{type:"text",id:"location",name:"location",value:y.location,onChange:z,disabled:w,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-gray-300 ".concat(w?"bg-gray-100 cursor-not-allowed":""),placeholder:"Enter location (optional)"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:U,disabled:w,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(w?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg"),children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),"Update"]})}),(0,s.jsx)("button",{onClick:q,disabled:w,className:"px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-md font-medium transition-colors disabled:opacity-50",children:"Cancel"})]}):(0,s.jsx)("button",{onClick:L,disabled:w,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(w?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg"),children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),"Adding User..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),"Add User"]})})})]})]})]}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(()=>{let a=e.find(e=>e.id===S);return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Confirm ",a.is_active?"Deactivation":"Activation"]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to ",a.is_active?"deactivate":"activate"," the user",(0,s.jsxs)("span",{className:"font-medium",children:[" ",a.name]}),"?",a.is_active&&" This will prevent them from accessing the system."]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)("button",{onClick:()=>F(null),disabled:w,className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-md transition-colors disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>M(S),disabled:w,className:"px-4 py-2 text-white rounded-md transition-colors disabled:opacity-50 flex items-center gap-2 ".concat(a.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),a.is_active?"Deactivating...":"Activating..."]}):(0,s.jsxs)(s.Fragment,{children:[a.is_active?(0,s.jsx)(p,{className:"h-4 w-4"}):(0,s.jsx)(h,{className:"h-4 w-4"}),a.is_active?"Deactivate":"Activate"]})})]})]}):null})()})})]})},v=(0,t(62278).A)(function(){return(0,s.jsx)(y,{})})},84616:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},84744:(e,a,t)=>{"use strict";t.d(a,{gw:()=>n,nu:()=>l,wz:()=>r});var s=t(59921);let r=async()=>{try{let e=await s.A.get("/api/user/",{headers:{"Content-Type":"application/json"}});return{success:!0,data:e.data}}catch(s){var e,a,t,r;return{success:!1,message:(null==(a=s.response)||null==(e=a.data)?void 0:e.detail)||(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||"Error fetching roles."}}},l=async e=>{try{let a=await s.A.post("/api/auth/signup",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,t,r,l;return{success:!1,message:(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error adding role."}}},n=async e=>{try{let{id:a,...t}=e,r=await s.A.put("/api/user/".concat(a),t,{headers:{"Content-Type":"application/json"}});return{success:!0,data:r.data}}catch(e){var a,t,r,l;return{success:!1,message:(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Error updating role."}}}},85339:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{e.O(0,[586,441,964,358],()=>e(e.s=27840)),_N_E=e.O()}]);