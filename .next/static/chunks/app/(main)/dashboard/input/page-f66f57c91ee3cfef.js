(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{10202:(e,t,a)=>{"use strict";a.d(t,{Au:()=>c,Co:()=>i,QL:()=>l,Zb:()=>d,le:()=>r,sY:()=>n,yv:()=>o});var s=a(59921);let n=async e=>{try{let t=await s.A.post("/api/content/",e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Error signing in."}}},l=async e=>{try{let t=await s.A.get("/api/content/".concat(e),{headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,n,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(n=l.data)?void 0:n.message)||"Error fetching locations."}}},r=async(e,t)=>{try{let a=await s.A.put("/api/content/".concat(t),e,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,n;return{success:!1,message:(null==(n=e.response)||null==(a=n.data)?void 0:a.detail)||"Error signing in."}}},o=async(e,t)=>{try{let a=await s.A.get("/api/content/".concat(e,"/version/").concat(t),{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,n,l,r;return{success:!1,message:(null==(n=e.response)||null==(a=n.data)?void 0:a.detail)||(null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Error fetching locations."}}},i=async e=>{try{let t=await s.A.get("/api/content/status-wise-count",{params:e,headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,n,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(n=l.data)?void 0:n.message)||"Error fetching status wise count."}}},c=async e=>{try{let t=await s.A.get("/api/content/priority-wise-count",{params:e,headers:{"Content-Type":"application/json"}});return{success:!0,data:t.data}}catch(e){var t,a,n,l;return{success:!1,message:(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||(null==(l=e.response)||null==(n=l.data)?void 0:n.message)||"Error fetching status wise count."}}},d=async(e,t)=>{try{let a=await s.A.put("/api/content/".concat(e,"/status"),t,{headers:{"Content-Type":"application/json"}});return{success:!0,data:a.data}}catch(e){var a,n,l,r;return{success:!1,message:(null==(n=e.response)||null==(a=n.data)?void 0:a.detail)||(null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Error updating content status."}}}},15585:(e,t,a)=>{Promise.resolve().then(a.bind(a,48528))},48528:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(95155),n=a(62278),l=a(12115),r=a(83540),o=a(93504),i=a(94754),c=a(96025),d=a(52071),u=a(27086),m=a(64683),h=a(42366),p=a(91788),v=a(57918),g=a(43900);let x=e=>{let{sampleData:t,headingText:a,onApplyFilter:n}=e,[x,j]=(0,l.useState)("date"),[y,b]=(0,l.useState)(!1),f=t.map(e=>{let t=e.value.reduce((e,t)=>({...e,...t}),{});return{name:e.date_name,...t}}),w=Object.keys(f[0]||{}).filter(e=>"name"!==e),[k,N]=(0,l.useState)(()=>w.reduce((e,t)=>(e[t]=!0,e),{})),A=(0,s.jsx)(r.u,{width:"100%",height:y?500:300,children:(0,s.jsxs)(o.b,{data:f,children:[(0,s.jsx)(i.d,{strokeDasharray:"3 3"}),(0,s.jsx)(c.W,{dataKey:"name"}),(0,s.jsx)(d.h,{}),(0,s.jsx)(u.m,{}),(0,s.jsx)(m.s,{onClick:e=>(e=>{e&&N(t=>({...t,[e]:!t[e]}))})(e.value)}),w.map((e,t)=>k[e]&&(0,s.jsx)(h.N,{type:"monotone",dataKey:e,stroke:"hsl(".concat(137.508*t%360,",70%,50%)")},e))]})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:a}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>n("date"),className:"p-2 rounded bg-gray-100",children:"Date"}),(0,s.jsx)("button",{onClick:()=>n("week"),className:"p-2 rounded bg-gray-100",children:"Week"}),(0,s.jsx)("button",{onClick:()=>n("month"),className:"p-2 rounded bg-gray-100",children:"Month"}),(0,s.jsx)("button",{onClick:()=>((e,t)=>{if(!e||0===e.length)return;let a=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)})(f,"".concat(a,".csv")),className:"p-2 rounded hover:bg-gray-100",children:(0,s.jsx)(p.A,{size:18})}),(0,s.jsx)("button",{onClick:()=>b(!0),className:"p-2 rounded hover:bg-gray-100",children:(0,s.jsx)(v.A,{size:18})})]})]}),A]}),y&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"w-full h-[85%] relative",children:[(0,s.jsx)("button",{onClick:()=>b(!1),className:"absolute top-3 z-[100] right-3 p-2 rounded bg-gray-200",children:(0,s.jsx)(g.A,{size:20})}),A]})})]})};var j=a(3401),y=a(23541);let b=e=>{let{sampleData:t}=e,[a,n]=(0,l.useState)({value:!0,value2:!0});return(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Bar Chart"}),(0,s.jsx)(r.u,{width:"100%",height:300,children:(0,s.jsxs)(j.E,{data:t,children:[(0,s.jsx)(i.d,{strokeDasharray:"3 3"}),(0,s.jsx)(c.W,{dataKey:"name"}),(0,s.jsx)(d.h,{}),(0,s.jsx)(u.m,{}),(0,s.jsx)(m.s,{}),a.value&&(0,s.jsx)(y.y,{dataKey:"value",fill:"#8884d8"}),a.value2&&(0,s.jsx)(y.y,{dataKey:"value2",fill:"#82ca9d"})]})})]})};var f=a(90170),w=a(18357),k=a(54811);let N=e=>{let{sampleData:t,labelKey:a,valueKey:n,headingText:o,onApplyFilter:i}=e,[c,d]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[j,y]=(0,l.useState)(!1),b=t.map(e=>({name:e[a],value:e[n]})),N=Array.from({length:b.length},(e,t)=>"hsl(".concat(137.508*t%360,", 70%, 50%)")),[A,C]=(0,l.useState)({});(0,l.useEffect)(()=>{C(b.reduce((e,t)=>(e[t.name]=!0,e),{}))},[t]);let S=b.map(e=>({...e,value:A[e.name]?e.value:0})),_=(0,s.jsx)(r.u,{width:"100%",height:j?500:300,children:(0,s.jsxs)(f.r,{children:[(0,s.jsx)(u.m,{}),(0,s.jsx)(m.s,{onClick:e=>(e=>{e&&C(t=>({...t,[e]:!t[e]}))})(e.value)}),(0,s.jsx)(w.F,{data:S,dataKey:"value",nameKey:"name",outerRadius:j?200:100,label:!0,children:S.map((e,t)=>(0,s.jsx)(k.f,{fill:N[t%N.length]},"cell-".concat(t)))})]})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-2xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:o}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>((e,t)=>{if(!e||0===e.length)return;let a=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)})(S,"".concat(o,".csv")),className:"p-2 rounded hover:bg-gray-100",children:(0,s.jsx)(p.A,{size:18})}),(0,s.jsx)("button",{onClick:()=>y(!0),className:"p-2 rounded hover:bg-gray-100",children:(0,s.jsx)(v.A,{size:18})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"border rounded px-2 py-1 text-sm"}),(0,s.jsx)("input",{type:"date",value:h,onChange:e=>x(e.target.value),className:"border rounded px-2 py-1 text-sm"}),(0,s.jsx)("button",{onClick:()=>i(c,h),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"Apply"})]}),_]}),j&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"w-full h-[85%]",children:[(0,s.jsx)("button",{onClick:()=>y(!1),className:"absolute top-3 right-3 p-2 rounded bg-gray-200",children:(0,s.jsx)(g.A,{size:20})}),_]})})]})};var A=a(10202);let C=(0,n.A)(function(){let[e,t]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=new Date().toISOString().split("T")[0];a(e,e),o("date")},[]);let a=async(e,a)=>{let s={};e&&(s.from_date=e),a&&(s.to_date=a),t((await (0,A.Co)(s)).data)},[n,r]=(0,l.useState)([]),o=async e=>{let t={};e&&(t.date_type=e),r((await (0,A.Au)(t)).data)};return(0,s.jsxs)("div",{className:"p-4 sm:p-6 grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,s.jsx)(x,{sampleData:n,headingText:"Priority",onApplyFilter:o},"priority-".concat(JSON.stringify(n))),(0,s.jsx)(N,{sampleData:e,labelKey:"status_text",valueKey:"count",headingText:"Status",onApplyFilter:a},"status-".concat(JSON.stringify(e))),(0,s.jsx)(b,{sampleData:[{name:"Mon",value:40,value2:30,date:"2025-08-18"},{name:"Tue",value:30,value2:50,date:"2025-08-19"},{name:"Wed",value:20,value2:40,date:"2025-08-20"},{name:"Thu",value:27,value2:60,date:"2025-08-21"},{name:"Fri",value:18,value2:35,date:"2025-08-22"}]}),(0,s.jsx)(b,{sampleData:[{name:"Mon",value:40,date:"2025-08-18"},{name:"Tue",value:30,date:"2025-08-19"},{name:"Wed",value:20,date:"2025-08-20"},{name:"Thu",value:27,date:"2025-08-21"},{name:"Fri",value:18,date:"2025-08-22"}]})]})}),S=(0,n.A)(function(){return(0,s.jsx)(C,{})})},59576:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var s=a(95155),n=a(12115),l=a(35695),r=a(29159);let o=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),u=(0,l.useRouter)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("tokenExpiration");if(e&&t)if(new Date().getTime()<parseInt(t))try{let t=(0,r.s)(e);i({user_id:(null==t?void 0:t.user_id)||"0",email:(null==t?void 0:t.email)||"",name:(null==t?void 0:t.name)||"",phone:(null==t?void 0:t.phone)||"",role_id:(null==t?void 0:t.role_id)||"",role_name:(null==t?void 0:t.role_name)||"",role_data:(null==t?void 0:t.role_data)||{}})}catch(e){console.error("Error decoding token:",e),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration")}else localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration");d(!1)},[]),(0,s.jsx)(o.Provider,{value:{user:a,loading:c,isAuthenticated:!!a,login:e=>{try{let t=new Date().getTime()+288e5;localStorage.setItem("token",e),localStorage.setItem("tokenExpiration",t.toString());let a=(0,r.s)(e);i({user_id:(null==a?void 0:a.user_id)||"Guest",email:(null==a?void 0:a.email)||"",name:(null==a?void 0:a.name)||"",phone:(null==a?void 0:a.phone)||"",role_id:(null==a?void 0:a.role_id)||"",role_name:(null==a?void 0:a.role_name)||"",role_data:(null==a?void 0:a.role_data)||{}})}catch(e){console.error("Error during login:",e)}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("tokenExpiration"),i(null),u.replace("/login")}},children:t})},c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},59921:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let s=a(23464).A.create({baseURL:"https://sppyapi.odishatv.in"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n=s},62278:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(95155),n=a(12115),l=a(35695),r=a(59576);let o=e=>{let t=t=>{let a=(0,l.useRouter)(),{isAuthenticated:o,loading:i}=(0,r.A)();return((0,n.useEffect)(()=>{i||o||(a.replace("/login"),setTimeout(()=>{"/login"!==window.location.pathname&&(window.location.href="/login")},100))},[o,i,a]),i||!o)?null:(0,s.jsx)(e,{...t})};return t.displayName="withAuth(".concat(e.displayName||e.name,")"),t}}},e=>{e.O(0,[586,698,441,964,358],()=>e(e.s=15585)),_N_E=e.O()}]);