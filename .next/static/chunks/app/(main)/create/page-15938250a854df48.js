(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{6059:(e,t,r)=>{Promise.resolve().then(r.bind(r,52933))},19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:o?24*Number(i)/Number(a):i,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:o,...d}=r;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=a(e),r}},51154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},52933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(95155),a=r(12115),l=r(62278),n=r(1465),i=r(89069),o=r(63540),d=r(57970),c=r(10202),u=r(34326),m=r(53422),h=r(50080),x=r(7577),p=r(85535);let g=(0,l.A)(function(){let{refreshCounts:e}=(0,m.tL)(),[t,r]=(0,a.useState)(""),[l,g]=(0,a.useState)(!1),v=(0,a.useRef)(null),[f,j]=(0,a.useState)(new Set),[b,y]=(0,a.useState)(!0),w=(0,a.useRef)(!1),[N,k]=(0,a.useState)(""),[C,L]=(0,a.useState)(""),[S,M]=(0,a.useState)(null),[H,A]=(0,a.useState)([]),[U,E]=(0,a.useState)([]),[z,R]=(0,a.useState)(!0),[B,W]=(0,a.useState)(null),[T,O]=(0,a.useState)([]),[_,P]=(0,a.useState)(!0),[V,D]=(0,a.useState)(""),[I,q]=(0,a.useState)([]);(0,a.useEffect)(()=>{g(!0);let e=()=>{w.current||F()};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}},[]),(0,a.useEffect)(()=>{let e=async()=>{try{R(!0);let e=await (0,n.l)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.map(e=>({value:e.id.toString(),label:e.priority}));E(t)}else console.error("Invalid priorities response structure:",e)}catch(e){console.error("Error fetching priorities:",e)}finally{R(!1)}},t=async()=>{try{P(!0);let e=await (0,o.V)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.location&&"string"==typeof e.location).map(e=>({id:e.id.toString(),name:e.location.trim()}));O(t)}else console.error("Invalid locations response structure:",e)}catch(e){console.error("Error fetching locations:",e)}finally{P(!1)}},r=async()=>{try{let e=await (0,d.v)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.content_type&&"string"==typeof e.content_type).map(e=>({id:e.id.toString(),content_type:e.content_type.trim()}));q(t)}else console.error("Invalid locations response structure:",e)}catch(e){console.error("Error fetching locations:",e)}};(async()=>{try{let e=await (0,i.Q)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.name&&"string"==typeof e.name).map(e=>({id:e.id.toString(),name:e.name.trim()}));A(t)}else console.error("Invalid tags response structure:",e)}catch(e){console.error("Error fetching tags:",e)}finally{}})(),e(),t(),r()},[]);let F=()=>{let e=new Set,t=window.getSelection();if(t&&t.rangeCount>0&&v.current){let l=t.anchorNode;for(;l&&l!==v.current;){if(l.nodeType===Node.ELEMENT_NODE){var r,s,a;let t=null==(r=l.tagName)?void 0:r.toLowerCase();if("ul"===t)e.add("ul");else if("ol"===t)e.add("ol");else if("li"===t){let t=null==(a=l.parentElement)||null==(s=a.tagName)?void 0:s.toLowerCase();"ul"===t&&e.add("ul"),"ol"===t&&e.add("ol")}}l=l.parentNode}try{document.queryCommandState("bold")&&e.add("bold"),document.queryCommandState("italic")&&e.add("italic"),document.queryCommandState("underline")&&e.add("underline")}catch(e){}}j(e)},K=(e,t)=>{if(!v.current)return;w.current=!0;let s=(()=>{let e=window.getSelection();if(e&&e.rangeCount>0&&v.current){let t=e.getRangeAt(0),r=t.cloneRange();return r.selectNodeContents(v.current),r.setEnd(t.endContainer,t.endOffset),r.toString().length}return 0})();v.current.focus(),"insertUnorderedList"===e||"insertOrderedList"===e?document.execCommand(e,!1):document.execCommand(e,!1,t),setTimeout(()=>{if(v.current){let e=v.current.innerHTML,t=v.current.textContent||"";r(e),y(0===t.trim().length),(e=>{let t;if(!v.current)return;let r=window.getSelection();if(!r)return;let s=0,a=document.createTreeWalker(v.current,NodeFilter.SHOW_TEXT,null);for(;t=a.nextNode();){var l;let a=s+((null==(l=t.textContent)?void 0:l.length)||0);if(e<=a){let a=document.createRange();a.setStart(t,e-s),a.collapse(!0),r.removeAllRanges(),r.addRange(a);return}s=a}let n=document.createRange();n.selectNodeContents(v.current),n.collapse(!1),r.removeAllRanges(),r.addRange(n)})(s),F(),w.current=!1}},10)},[X,Z]=(0,a.useState)(null),G=N&&V&&(null==B?void 0:B.name)&&C&&t,J=async r=>{Z(r);let s=$.filter(e=>e.uploadedUrl).map(e=>({url:e.uploadedUrl}));try{let a={priority:N,content_type:V,location:(null==B?void 0:B.name)||"",tags:(null==S?void 0:S.name)||"",headline:C,description:t,attachments:s,status:"save"===r?2:1};(await (0,c.sY)(a)).success&&(Y(),(0,p.S7)("Success","Saved successfully!","success"),await e())}catch(e){console.error((null==e?void 0:e.message)||"Submit failed.")}finally{Z(null)}},Y=()=>{k(""),D(""),L(""),W(null),r(""),M(null),ee([]),v.current&&(v.current.innerHTML=""),y(!0)},Q=e=>{let{onClick:t,active:r=!1,title:a,children:l}=e;return(0,s.jsx)("button",{onClick:t,className:"p-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(r?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),title:a,onMouseDown:e=>e.preventDefault(),children:l})},[$,ee]=(0,a.useState)([]),et=(0,a.useRef)(null),er=async e=>{let t=$[e];if(t.uploadedUrl&&t.s3Key)try{await fetch("/api/delete-from-s3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t.s3Key})})}catch(e){console.error("Error deleting from S3:",e)}URL.revokeObjectURL(t.previewUrl),ee(t=>t.filter((t,r)=>r!==e))},es=async()=>{let e=[...$];for(let t=0;t<e.length;t++){let r=e[t];if(!r.uploadedUrl)try{let e=await (0,u.Z)(r.file.name,r.file.type),s=new FormData;Object.entries(e.fields).forEach(e=>{let[t,r]=e;s.append(t,r)}),s.append("file",r.file),await new Promise((r,a)=>{let l=new XMLHttpRequest;l.open("POST",e.url),l.upload.onprogress=e=>{if(e.lengthComputable){let r=e.loaded/e.total*100;ee(e=>e.map((e,s)=>s===t?{...e,progress:r}:e))}},l.onload=()=>{if(204===l.status){let s="".concat(e.fields.key);ee(e=>e.map((e,r)=>r===t?{...e,uploadedUrl:s,s3Key:s}:e)),r()}else a("Upload failed")},l.onerror=()=>a("XHR Error"),l.send(s)})}catch(e){console.error("Upload failed for ".concat(r.file.name),e)}}};return l?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 bg-gray-50 p-4 flex-shrink-0",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Add Story"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:Y,className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>J("draft"),disabled:!G||null!==X,className:"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors flex items-center justify-center gap-2 ".concat(G&&!X?"bg-green-600 hover:bg-green-700":"bg-green-400 cursor-not-allowed"),children:"draft"===X?(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):"Draft Story"}),(0,s.jsx)("button",{onClick:()=>J("save"),disabled:!G||null!==X,className:"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors flex items-center justify-center gap-2 ".concat(G&&!X?"bg-blue-600 hover:bg-blue-700":"bg-blue-400 cursor-not-allowed"),children:"save"===X?(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):"Create Story"})]})]})})})}),(0,s.jsx)("div",{className:"flex-1 py-2 px-4 overflow-auto",children:(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Priority",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:N,onChange:e=>k(e.target.value),disabled:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm disabled:bg-gray-100",children:[(0,s.jsx)("option",{value:"",children:z?"Loading priorities...":"Select Priority"}),U.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),z&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Loading priority options..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Content Type",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:V,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm",children:[(0,s.jsx)("option",{value:"",children:"Select Content Type"}),I.map(e=>(0,s.jsx)("option",{value:e.id,children:e.content_type},e.id))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(x.A,{selectedLocation:B,onLocationChange:W,availableLocations:T,isLoading:_,placeholder:"Search or add location..."}),(0,s.jsx)(h.A,{selectedTag:S,onTagChange:M,availableTags:H,placeholder:"Choose a tag..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:C,onChange:e=>L(e.target.value),placeholder:"Enter story title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),(0,s.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Q,{onClick:()=>K("bold"),active:f.has("bold"),title:"Bold (Ctrl+B)",children:(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"})]})}),(0,s.jsx)(Q,{onClick:()=>K("italic"),active:f.has("italic"),title:"Italic (Ctrl+I)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 4v16m4-16v16"})})}),(0,s.jsx)(Q,{onClick:()=>K("underline"),active:f.has("underline"),title:"Underline (Ctrl+U)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 4v8a4 4 0 108 0V4M4 20h16"})})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Q,{onClick:()=>K("insertUnorderedList"),active:f.has("ul"),title:"Bullet List",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),(0,s.jsx)(Q,{onClick:()=>K("insertOrderedList"),active:f.has("ol"),title:"Numbered List",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V6H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"})})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Q,{onClick:()=>K("formatBlock","h1"),title:"Heading 1",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H1"})}),(0,s.jsx)(Q,{onClick:()=>K("formatBlock","h2"),title:"Heading 2",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H2"})}),(0,s.jsx)(Q,{onClick:()=>K("formatBlock","h3"),title:"Heading 3",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H3"})}),(0,s.jsx)(Q,{onClick:()=>K("formatBlock","p"),title:"Paragraph",children:(0,s.jsx)("span",{className:"text-xs",children:"P"})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Q,{onClick:()=>K("undo"),title:"Undo (Ctrl+Z)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),(0,s.jsx)(Q,{onClick:()=>K("redo"),title:"Redo (Ctrl+Y)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 10h-10a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"})})})]})]})}),(0,s.jsxs)("div",{className:"p-6 relative",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Story Content",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{ref:v,contentEditable:!0,onInput:e=>{if(v.current&&!w.current){let e=v.current.innerHTML;y(0===(v.current.textContent||"").trim().length),r(e)}},onKeyUp:F,onClick:F,onFocus:F,suppressContentEditableWarning:!0,className:"min-h-[200px] p-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{lineHeight:"1.6",fontFamily:"system-ui, -apple-system, sans-serif"}})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"mb-5.5",children:[(0,s.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Attachment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[(0,s.jsxs)("div",{onClick:()=>{var e;return null==(e=et.current)?void 0:e.click()},className:"relative block w-full cursor-pointer appearance-none rounded border border-dashed border-orange-400 bg-gray px-4 py-4 dark:bg-meta-4 sm:py-7.5",children:[(0,s.jsx)("input",{type:"file",multiple:!0,accept:"audio/*,image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",className:"absolute inset-0 z-50 h-full w-full opacity-0",onChange:e=>{let t=Array.from(e.target.files||[]);ee(e=>{let r=new Set(e.map(e=>e.file.name));return[...e,...t.filter(e=>!r.has(e.name)).map(e=>({file:e,previewUrl:URL.createObjectURL(e),progress:0}))]})}}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,s.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-stroke bg-white dark:border-strokedark dark:bg-boxdark",children:"\uD83D\uDCC1"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-primary",children:"Click to upload"})," or drag and drop"]}),(0,s.jsx)("p",{className:"mt-1.5",children:"JPG, PNG, MP4, PDF, DOCX"}),(0,s.jsx)("p",{children:"(Multiple files allowed)"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-96",children:[(0,s.jsx)("div",{className:"max-h-54 overflow-y-auto pr-2 space-y-4",children:$.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>er(t),className:"absolute -right-2 -top-1 z-10 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-primary text-xs hover:bg-red-600",title:"Remove",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x-circle-fill",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})}),e.file.type.startsWith("image")?(0,s.jsx)("img",{src:e.previewUrl,alt:"preview",className:"h-16 w-16 rounded object-cover border border-gray-300"}):e.file.type.startsWith("video")?(0,s.jsx)("video",{src:e.previewUrl,className:"h-16 w-16 rounded border border-gray-300",muted:!0,loop:!0}):e.file.type.startsWith("audio")?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-earmark-music-fill h-12 w-12 ",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M11 6.64v1.75l-2 .5v3.61c0 .495-.301.883-.662 1.123C7.974 13.866 7.499 14 7 14s-.974-.134-1.338-.377C5.302 13.383 5 12.995 5 12.5s.301-.883.662-1.123C6.026 11.134 6.501 11 7 11c.356 0 .7.068 1 .196V6.89a1 1 0 0 1 .757-.97l1-.25A1 1 0 0 1 11 6.64"})}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-text h-12 w-12 ",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"}),(0,s.jsx)("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,s.jsx)("progress",{value:e.progress,max:100,className:"w-full h-2 rounded [&::-webkit-progress-value]:bg-primary"}),e.uploadedUrl&&(0,s.jsx)("a",{href:e.uploadedUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600",children:"View uploaded file"})]})]},t))}),(0,s.jsxs)("button",{type:"button",onClick:es,disabled:0===$.length,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md cursor-pointer hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Files"]})]})]})]}),(0,s.jsx)("div",{className:"pb-20"})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 bg-gray-50 shadow-sm",children:(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsx)("div",{className:"rounded-lg shadow-sm",children:(0,s.jsxs)("div",{className:"animate-pulse p-6",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]}),(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})]})})})}),(0,s.jsx)("div",{className:"px-4 py-6",children:(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded mb-6"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})]})})})]})});var v=r(51154),f=r(57434),j=r(19946);let b=(0,j.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),y=(0,j.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),w=(0,l.A)(function(){let{refreshCounts:e}=(0,m.tL)(),[t,r]=(0,a.useState)(""),[l,g]=(0,a.useState)(!1),j=(0,a.useRef)(null),[w,N]=(0,a.useState)(new Set),[k,C]=(0,a.useState)(!0),L=(0,a.useRef)(!1),[S,M]=(0,a.useState)(""),[H,A]=(0,a.useState)(""),[U,E]=(0,a.useState)(null),[z,R]=(0,a.useState)([]),[B,W]=(0,a.useState)([]),[T,O]=(0,a.useState)(!0),[_,P]=(0,a.useState)(null),[V,D]=(0,a.useState)([]),[I,q]=(0,a.useState)(!0),[F,K]=(0,a.useState)(""),[X,Z]=(0,a.useState)([]),[G,J]=(0,a.useState)(!0);(0,a.useEffect)(()=>{g(!0);let e=()=>{L.current||Y()};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}},[]),(0,a.useEffect)(()=>{let e=async()=>{try{O(!0);let e=await (0,n.l)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.map(e=>({value:e.id.toString(),label:e.priority}));W(t)}else console.error("Invalid priorities response structure:",e)}catch(e){console.error("Error fetching priorities:",e)}finally{O(!1)}},t=async()=>{try{q(!0);let e=await (0,o.V)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.location&&"string"==typeof e.location).map(e=>({id:e.id.toString(),name:e.location.trim()}));D(t)}else console.error("Invalid locations response structure:",e)}catch(e){console.error("Error fetching locations:",e)}finally{q(!1)}},r=async()=>{try{J(!0);let e=await (0,d.v)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.content_type&&"string"==typeof e.content_type).map(e=>({id:e.id.toString(),content_type:e.content_type.trim()}));Z(t)}else console.error("Invalid locations response structure:",e)}catch(e){console.error("Error fetching locations:",e)}finally{q(!1)}};(async()=>{try{let e=await (0,i.Q)();if(e.success&&e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>e.name&&"string"==typeof e.name).map(e=>({id:e.id.toString(),name:e.name.trim()}));R(t)}else console.error("Invalid tags response structure:",e)}catch(e){console.error("Error fetching tags:",e)}})(),e(),t(),r()},[]);let Y=()=>{let e=new Set;document.queryCommandState("bold")&&e.add("bold"),document.queryCommandState("italic")&&e.add("italic"),document.queryCommandState("underline")&&e.add("underline"),document.queryCommandState("insertUnorderedList")&&e.add("ul"),document.queryCommandState("insertOrderedList")&&e.add("ol"),N(e)},Q=(e,t)=>{if(!j.current)return;L.current=!0;let s=(()=>{let e=window.getSelection();if(e&&e.rangeCount>0&&j.current){let t=e.getRangeAt(0),r=t.cloneRange();return r.selectNodeContents(j.current),r.setEnd(t.endContainer,t.endOffset),r.toString().length}return 0})();j.current.focus(),document.execCommand(e,!1,t),setTimeout(()=>{if(j.current){let e=j.current.innerHTML,t=j.current.textContent||"";r(e),C(0===t.trim().length),(e=>{let t;if(!j.current)return;let r=window.getSelection();if(!r)return;let s=0,a=document.createTreeWalker(j.current,NodeFilter.SHOW_TEXT,null);for(;t=a.nextNode();){var l;let a=s+((null==(l=t.textContent)?void 0:l.length)||0);if(e<=a){let a=document.createRange();a.setStart(t,e-s),a.collapse(!0),r.removeAllRanges(),r.addRange(a);return}s=a}let n=document.createRange();n.selectNodeContents(j.current),n.collapse(!1),r.removeAllRanges(),r.addRange(n)})(s),Y(),L.current=!1}},0)},[$,ee]=(0,a.useState)(null),et=S&&F&&(null==_?void 0:_.name)&&H&&t,er=async r=>{ee(r);let s=el.filter(e=>e.uploadedUrl).map(e=>({url:e.uploadedUrl}));try{let a={priority:S,content_type:F,location:(null==_?void 0:_.name)||"",tags:(null==U?void 0:U.name)||"",headline:H,description:t,attachments:s,status:"save"===r?2:1};(await (0,c.sY)(a)).success&&(es(),(0,p.S7)("Success","Saved successfully!","success"),await e())}catch(e){console.error((null==e?void 0:e.message)||"Submit failed.")}finally{ee(null)}},es=()=>{M(""),K(""),A(""),P(null),r(""),E(null),en([]),j.current&&(j.current.innerHTML=""),C(!0)},ea=e=>{let{onClick:t,active:r=!1,title:a,children:l}=e;return(0,s.jsx)("button",{onClick:t,className:"p-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(r?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),title:a,onMouseDown:e=>e.preventDefault(),children:l})},[el,en]=(0,a.useState)([]),ei=(0,a.useRef)(null),eo=async e=>{let t=el[e];if(t.uploadedUrl&&t.s3Key)try{await fetch("/api/delete-from-s3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t.s3Key})})}catch(e){console.error("Error deleting from S3:",e)}URL.revokeObjectURL(t.previewUrl),en(t=>t.filter((t,r)=>r!==e))},ed=async()=>{let e=[...el];for(let t=0;t<e.length;t++){let r=e[t];if(!r.uploadedUrl)try{let e=await (0,u.Z)(r.file.name,r.file.type),s=new FormData;Object.entries(e.fields).forEach(e=>{let[t,r]=e;s.append(t,r)}),s.append("file",r.file),await new Promise((r,a)=>{let l=new XMLHttpRequest;l.open("POST",e.url),l.upload.onprogress=e=>{if(e.lengthComputable){let r=e.loaded/e.total*100;en(e=>e.map((e,s)=>s===t?{...e,progress:r}:e))}},l.onload=()=>{if(204===l.status){let s="".concat(e.fields.key);en(e=>e.map((e,r)=>r===t?{...e,uploadedUrl:s,s3Key:s}:e)),r()}else a("Upload failed")},l.onerror=()=>a("XHR Error"),l.send(s)})}catch(e){console.error("Upload failed for ".concat(r.file.name),e)}}};return l?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 bg-gray-50 flex-shrink-0",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,s.jsxs)("div",{className:"flex justify-between gap-1",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Add Story"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>er("draft"),disabled:!et||null!==$,className:"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors flex items-center justify-center gap-2 ".concat(et&&!$?"bg-green-600 hover:bg-green-700":"bg-green-400 cursor-not-allowed"),children:"draft"===$?(0,s.jsx)(v.A,{className:"animate-spin h-4 w-4 text-white"}):(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>er("save"),disabled:!et||null!==$,className:"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors flex items-center justify-center gap-2 ".concat(et&&!$?"bg-blue-600 hover:bg-blue-700":"bg-blue-400 cursor-not-allowed"),children:"save"===$?(0,s.jsx)(v.A,{className:"animate-spin h-4 w-4 text-white"}):(0,s.jsx)(b,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:es,className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:(0,s.jsx)(y,{className:"h-4 w-4"})})]})]})})})}),(0,s.jsx)("div",{className:"flex-1 py-2  overflow-auto",children:(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Priority",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:S,onChange:e=>M(e.target.value),disabled:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm disabled:bg-gray-100",children:[(0,s.jsx)("option",{value:"",children:T?"Loading priorities...":"Select Priority"}),B.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),T&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Loading priority options..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Content Type",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:F,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm",children:[(0,s.jsx)("option",{value:"",children:"Select Content Type"}),X.map(e=>(0,s.jsx)("option",{value:e.id,children:e.content_type},e.id))]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(x.A,{selectedLocation:_,onLocationChange:P,availableLocations:V,isLoading:I,placeholder:"Search or add location..."}),(0,s.jsx)(h.A,{selectedTag:U,onTagChange:E,availableTags:z,placeholder:"Choose a tag..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:H,onChange:e=>A(e.target.value),placeholder:"Enter story title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),(0,s.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ea,{onClick:()=>Q("bold"),active:w.has("bold"),title:"Bold (Ctrl+B)",children:(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"})]})}),(0,s.jsx)(ea,{onClick:()=>Q("italic"),active:w.has("italic"),title:"Italic (Ctrl+I)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 4v16m4-16v16"})})}),(0,s.jsx)(ea,{onClick:()=>Q("underline"),active:w.has("underline"),title:"Underline (Ctrl+U)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 4v8a4 4 0 108 0V4M4 20h16"})})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ea,{onClick:()=>Q("insertUnorderedList"),active:w.has("ul"),title:"Bullet List",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),(0,s.jsx)(ea,{onClick:()=>Q("insertOrderedList"),active:w.has("ol"),title:"Numbered List",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V6H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"})})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ea,{onClick:()=>{let e=prompt("Enter URL:");e&&Q("createLink",e)},title:"Insert Link",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),(0,s.jsx)(ea,{onClick:()=>{let e=prompt("Enter image URL:");e&&Q("insertImage",e)},title:"Insert Image",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ea,{onClick:()=>Q("formatBlock","h1"),title:"Heading 1",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H1"})}),(0,s.jsx)(ea,{onClick:()=>Q("formatBlock","h2"),title:"Heading 2",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H2"})}),(0,s.jsx)(ea,{onClick:()=>Q("formatBlock","h3"),title:"Heading 3",children:(0,s.jsx)("span",{className:"text-xs font-bold",children:"H3"})}),(0,s.jsx)(ea,{onClick:()=>Q("formatBlock","p"),title:"Paragraph",children:(0,s.jsx)("span",{className:"text-xs",children:"P"})})]}),(0,s.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ea,{onClick:()=>Q("undo"),title:"Undo (Ctrl+Z)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),(0,s.jsx)(ea,{onClick:()=>Q("redo"),title:"Redo (Ctrl+Y)",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 10h-10a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"})})})]})]})}),(0,s.jsxs)("div",{className:"p-6 relative",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Story Content",(0,s.jsx)("sup",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{ref:j,contentEditable:!0,onInput:e=>{if(j.current&&!L.current){let e=j.current.innerHTML;C(0===(j.current.textContent||"").trim().length),r(e)}},onKeyUp:Y,onClick:Y,suppressContentEditableWarning:!0,className:"min-h-[200px] border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{fontSize:"14px",lineHeight:"1.6",fontFamily:"system-ui, -apple-system, sans-serif"}})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"mb-5.5",children:[(0,s.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Attachment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[(0,s.jsxs)("div",{onClick:()=>{var e;return null==(e=ei.current)?void 0:e.click()},className:"relative block w-full cursor-pointer appearance-none rounded border border-dashed border-orange-400 bg-gray px-4 py-4 dark:bg-meta-4 sm:py-7.5",children:[(0,s.jsx)("input",{type:"file",multiple:!0,accept:"audio/*,image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.txt",className:"absolute inset-0 z-50 h-full w-full opacity-0",onChange:e=>{let t=Array.from(e.target.files||[]);en(e=>{let r=new Set(e.map(e=>e.file.name));return[...e,...t.filter(e=>!r.has(e.name)).map(e=>({file:e,previewUrl:URL.createObjectURL(e),progress:0}))]})}}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,s.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-stroke bg-white dark:border-strokedark dark:bg-boxdark",children:"\uD83D\uDCC1"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-primary",children:"Click to upload"})," or drag and drop"]}),(0,s.jsx)("p",{className:"mt-1.5",children:"JPG, PNG, MP4, PDF, DOCX"}),(0,s.jsx)("p",{children:"(Multiple files allowed)"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-96",children:[(0,s.jsx)("div",{className:"max-h-54 overflow-y-auto pr-2 space-y-4",children:el.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>eo(t),className:"absolute -right-2 -top-1 z-10 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-primary text-xs hover:bg-red-600",title:"Remove",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x-circle-fill",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})}),e.file.type.startsWith("image")?(0,s.jsx)("img",{src:e.previewUrl,alt:"preview",className:"h-16 w-16 rounded object-cover border border-gray-300"}):e.file.type.startsWith("video")?(0,s.jsx)("video",{src:e.previewUrl,className:"h-16 w-16 rounded border border-gray-300",muted:!0,loop:!0}):e.file.type.startsWith("audio")?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-earmark-music-fill h-12 w-12 ",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M11 6.64v1.75l-2 .5v3.61c0 .495-.301.883-.662 1.123C7.974 13.866 7.499 14 7 14s-.974-.134-1.338-.377C5.302 13.383 5 12.995 5 12.5s.301-.883.662-1.123C6.026 11.134 6.501 11 7 11c.356 0 .7.068 1 .196V6.89a1 1 0 0 1 .757-.97l1-.25A1 1 0 0 1 11 6.64"})}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-text h-12 w-12 ",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"}),(0,s.jsx)("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,s.jsx)("progress",{value:e.progress,max:100,className:"w-full h-2 rounded [&::-webkit-progress-value]:bg-primary"}),e.uploadedUrl&&(0,s.jsx)("a",{href:e.uploadedUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600",children:"View uploaded file"})]})]},t))}),(0,s.jsxs)("button",{type:"button",onClick:ed,disabled:0===el.length,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md cursor-pointer hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Files"]})]})]})]}),(0,s.jsx)("div",{className:"pb-20"})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 bg-gray-50 shadow-sm",children:(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsx)("div",{className:"rounded-lg shadow-sm",children:(0,s.jsxs)("div",{className:"animate-pulse p-6",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]}),(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})]})})})}),(0,s.jsx)("div",{className:"px-4 py-6",children:(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded mb-6"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})]})})})]})});function N(){let e=function(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}();return(0,s.jsx)(e?w:g,{})}},57434:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[578,320,586,376,441,964,358],()=>e(e.s=6059)),_N_E=e.O()}]);